<!doctype html>
<html lang="ru" data-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ELIZABETH | Поиск запчастей</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/bootstrap-icons/font/bootstrap-icons.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='vendor/bootstrap/css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  </head>
  <body class="min-vh-100 d-flex flex-column">
    <nav class="navbar navbar-expand-lg sticky-top px-3 py-3">
      <div class="container page-shell d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center gap-2">
          <span class="badge badge-soft text-uppercase fw-semibold">Elizabeth</span>
          <a class="navbar-brand mb-0 h4 text-decoration-none" href="#">Armtek Search</a>
        </div>
        <button id="theme-toggle" class="btn btn-outline-secondary theme-toggle" type="button" aria-label="Переключить тему">
          <i class="bi bi-circle-half"></i>
          <span class="theme-label">Авто</span>
        </button>
      </div>
    </nav>

    <main class="flex-grow-1 d-flex align-items-center">
      <div class="container page-shell py-4">
        <div class="card border-0 p-4 p-md-5">
          <div class="d-flex flex-column gap-2 mb-4">
            <div class="d-flex align-items-center gap-2">
              <i class="bi bi-search text-primary"></i>
              <span class="text-uppercase fw-semibold text-primary">Поиск запчастей</span>
            </div>
            <h1 class="mb-0">Найдите запчасть по артикулу и бренду</h1>
            <p class="muted-text mb-0" id="hint-text">Формат: <span class="fw-semibold">332101_KYB</span>. Бренд обязателен.</p>
          </div>

          <form id="search-form" class="d-flex flex-column gap-3" novalidate>
            <div>
              <label class="form-label fw-semibold" for="search-input">Поисковый запрос</label>
              <div class="d-flex flex-column gap-2">
                <div class="input-group input-group-lg">
                  <span class="input-group-text"><i class="bi bi-search"></i></span>
                  <textarea
                    class="form-control single-line-textarea"
                    id="search-input"
                    rows="1"
                    placeholder="332101_KYB"
                    aria-describedby="search-help"
                  ></textarea>
                  <button id="search-button" type="submit" class="btn btn-primary" aria-label="Запустить поиск">
                    <i class="bi bi-search"></i>
                  </button>
                </div>
                <div class="d-flex flex-wrap gap-2">
                  <button id="import-button" type="button" class="btn btn-outline-secondary">
                    <i class="bi bi-upload"></i>
                    Импортировать из файла
                  </button>
                  <input type="file" id="file-input" class="d-none" accept=".txt" />
                </div>
              </div>
              <div class="d-flex align-items-center gap-2 mt-1 text-muted" id="search-help">
                <i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Введите артикул и бренд через подчёркивание."></i>
                  <small>Поддерживаются разделители: запятая, точка с запятой, точка, слеш, перевод строки. Бренд обязателен. Внутри позиции используйте только подчёркивание.</small>
              </div>
            </div>
          </form>

          <div id="error-box" class="mt-3" role="alert" aria-live="assertive"></div>

          <div class="d-flex flex-wrap gap-2 mt-3 d-none" id="characteristics-actions">
            <button type="button" class="btn btn-outline-primary" id="fetch-characteristics-btn" disabled>
              <i class="bi bi-grid"></i>
              Запросить параметры товаров
            </button>
            <button type="button" class="btn btn-outline-secondary d-none" id="retry-failed-btn" disabled>
              <i class="bi bi-arrow-clockwise"></i>
              Повторить запрос для неуспешных
            </button>
          </div>

          <div id="result-box" class="mt-4" role="status" aria-live="polite">
            <div class="muted-text">Результаты появятся здесь после поиска.</div>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer py-3">
      <div class="container page-shell d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
        <span class="small">ELIZABETH • Armtek UI Prototype</span>
        <span class="small">Светлая / тёмная тема • Bootstrap 5</span>
      </div>
    </footer>

    <div
      class="modal fade"
      id="confirm-modal"
      tabindex="-1"
      aria-labelledby="confirm-modal-label"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="confirm-modal-label">Открыть страницу Armtek</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p class="mb-0" id="confirm-modal-text"></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" id="confirm-modal-cancel">
              Отмена
            </button>
            <button type="button" class="btn btn-primary" id="confirm-modal-confirm">Открыть</button>
          </div>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
    <script>
      window.BACKEND_BASE_URL = "{{ config['BACKEND_BASE_URL'] }}";
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
